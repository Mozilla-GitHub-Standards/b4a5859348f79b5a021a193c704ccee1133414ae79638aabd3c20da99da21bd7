/* Copyright (C) 2007-2011 eBay Inc. All Rights Reserved. */EXPORTED_SYMBOLS=["FileIOHelper"];const Cc=Components.classes;const Ci=Components.interfaces;const Ce=Components.Exception;const Cr=Components.results;const Cu=Components.utils;const PR_WRONLY=0x02;const PR_CREATE_FILE=0x08;const PR_TRUNCATE=0x20;const PR_PERMS_FILE=0644;var FileIOHelper={_init:function(){try{Cu.import("resource://ebaycompanion/helpers/logger.js");}
catch(e){Logger.exception(e);}},fileToString:function(file){let data="";try{let fis=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream);fis.init(file,-1,0,0);let is=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream);is.init(fis,"UTF-8",1024,Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);let buffer={};while(is.readString(4096,buffer)!=0){data+=buffer.value;}
is.close();fis.close();}catch(e){Logger.exception(e);}
return data;},stringToFile:function(data,file){try{let fos=Cc["@mozilla.org/network/file-output-stream;1"].createInstance(Ci.nsIFileOutputStream);fos.init(file,PR_WRONLY|PR_CREATE_FILE|PR_TRUNCATE,(arguments.length==3?arguments[2]:PR_PERMS_FILE),0);let os=Cc["@mozilla.org/intl/converter-output-stream;1"].createInstance(Ci.nsIConverterOutputStream);os.init(fos,"UTF-8",0,0x0000);os.writeString(data);os.close();fos.close();}catch(e){Logger.exception(e);}}};FileIOHelper._init();