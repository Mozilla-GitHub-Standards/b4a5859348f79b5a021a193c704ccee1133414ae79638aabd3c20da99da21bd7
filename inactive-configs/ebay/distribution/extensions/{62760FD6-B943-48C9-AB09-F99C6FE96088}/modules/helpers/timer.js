/* Copyright (C) 2007-2011 eBay Inc. All Rights Reserved. */let EXPORTED_SYMBOLS=["Timer"];const Cc=Components.classes;const Ci=Components.interfaces;const Ce=Components.Exception;const Cr=Components.results;const Cu=Components.utils;function Timer(callback,interval,type){if(!type)type=Timer.TYPE_ONE_SHOT;this._callback=callback;this._timer=Cc["@mozilla.org/timer;1"].createInstance(Ci.nsITimer);this._timer.initWithCallback(this,interval,type);this._startTime=Date.now();}
Timer.TYPE_ONE_SHOT=Ci.nsITimer.TYPE_ONE_SHOT;Timer.TYPE_REPEATING_SLACK=Ci.nsITimer.TYPE_REPEATING_SLACK;Timer.TYPE_REPEATING_PRECISE=Ci.nsITimer.TYPE_REPEATING_PRECISE;Timer.prototype={get interval(){return this._timer.delay;},get elapsedTime(){return Date.now()-this._startTime;},notify:function(timer){if(this._timer.type==Timer.TYPE_REPEATING_PRECISE){this._startTime=Date.now();}
this._callback();if(this._timer.type==Timer.TYPE_REPEATING_SLACK){this._startTime=Date.now();}},cancel:function(){this._timer.cancel();}};